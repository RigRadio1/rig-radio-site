<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Rig-Radio | Create account</title>
  <link rel="icon" href="/favicon.ico">
  <style>
    :root { --bg:#0b0b0c; --panel:#121214; --border:#1e1e22; --muted:#cfd2d7; --text:#fff; --accent:#D90429; }
    *{ box-sizing:border-box; } html,body{ height:100%; }
    body{ margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif; display:flex; flex-direction:column; }
    header{ padding:14px 18px; border-bottom:1px solid #222; display:flex; align-items:center; }
    header a{ color:#fff; text-decoration:none; font-weight:600; }
    #auth-quick{ margin-left:auto; }
    main{ flex:1; display:grid; place-items:center; padding:24px; }
    .card{ width:100%; max-width:420px; background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,.35); }
    h1{ font-size:1.4rem; margin:0 0 1rem; }
    label{ display:block; font-size:.9rem; margin:.5rem 0 .35rem; color:var(--muted); }
    input{ width:100%; padding:12px; border-radius:10px; border:1px solid #2a2a2f; background:#0f0f12; color:#fff; }
    button{ margin-top:14px; width:100%; padding:12px; border:0; border-radius:10px; background:var(--accent); color:#fff; font-weight:700; cursor:pointer; }
    .muted{ color:#aab; font-size:.9rem; }
    .msg{ margin-top:.75rem; min-height:1.25em; }
    .navlinks{ margin-top:12px; text-align:center; }
    .error{ color:#ff6b6b; }
  </style>
    <link rel="stylesheet" href="/rr.css">
</head>
<body class="auth-page">

  <header>
    <a href="/">Rig-Radio</a>
    <span id="auth-quick"></span>
  </header>

  <main>
<div class="banner">
  <img src="/banner.png" alt="Rig-Radio Banner">
</div>
<div class="card">
  <h1>Create your account</h1>
  <p class="muted">Join Rig-Radio to upload tracks and videos, follow artists, and access member features.</p>

  <form id="signup-form" autocomplete="on" novalidate>
    <!-- Display Name -->
    <label for="display_name">Display Name</label>
    <input id="display_name" type="text" name="display_name" placeholder="Artist or listener name" required>

    <!-- Email -->
    <label for="email">Email</label>
    <input id="email" type="email" name="email" placeholder="you@example.com" required>

    <!-- Password -->
    <label for="password">Password</label>
    <input id="password" type="password" name="password" placeholder="Create a strong password" required>

    <!-- Terms -->
    <div class="terms">
      <input id="agree" type="checkbox" required>
      <label for="agree">I agree to the Terms and understand the Community Guidelines.</label>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn-primary">Create Account</button>

    <!-- Switch -->
    <p class="auth-switch">Already have an account? <a href="/login">Log in</a></p>
  </form>
</div>

    
  </main>

  <!-- Scripts must be in this order -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="/rr-supabase.js?v=6"></script>
  <!-- alias shim: ensure both globals exist even if cache/order was funky -->
  <script>window.rigSupabase = window.rigSupabase || window.supabase;</script>
  <script src="/auth.js"></script>
  <script>
    rrShowAuthQuicklink();

    // Extra client-side guard for 8-char rule
    (function enforceMin8() {
      const form = document.getElementById('signup-form');
      const msg = document.getElementById('signup-msg');
      form.addEventListener('submit', function(e){
        const pw = form.password.value || '';
        if (pw.length < 8) {
          e.preventDefault();
          msg.classList.add('error');
          msg.textContent = 'Password must be at least 8 characters.';
        } else {
          msg.classList.remove('error');
          msg.textContent = '';
        }
      });
    })();

    rrRedirectIfAuthed('/dashboard.html');
    rrBindSignupForm('signup-form', '/dashboard.html');
  </script>
</body>
</html>
